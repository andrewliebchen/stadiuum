<template name="tasks">
  {{> current}}
  {{> backlog}}
</template>

<template name="current">
  <section class="panel panel-default">
    <header class="panel-heading">
      Current
    </header>
    <ul class="list-group">
      {{#each task}}
        {{> taskItem}}
      {{/each}}
    </ul>
  </section>
</template>

<template name="backlog">
  <section class="panel panel-default">
    <header class="panel-heading">
      Backlog
    </header>
    <ul class="list-group">
      {{#each task}}
        {{> taskItem}}
      {{/each}}
    </ul>
  </section>
</template>

<template name="taskItem">
  {{#unless status.isFinished}}
    <li class="task list-group-item">
      <div class="task-title">
        {{title}}
      </div>
      <div class="task-options">
        <div class="pull-left">
          <button type="button" class="btn btn-default btn-sm mtr_upvote-task">
            +{{priority}}
          </button>
          <button type="button" class="btn btn-default btn-sm">Unassigned</button>
          <button type="button" class="btn btn-default btn-sm">0 points</button>
          <button type="button" class="btn btn-default btn-sm">No discussion</button>
        </div>
        <div class="pull-right">
          {{#unless status.isStarted}}
            <button type="button" class="btn btn-default btn-sm mtr_move-task">
              {{#if isCurrent}}
                Move to backlog
              {{else}}
                Move to current
              {{/if}}
            </button>
          {{/unless}}
          {{#if status.isNotStarted}}
            <button type="button" class="btn btn-primary btn-sm mtr_start">
              Start
            </button>
          {{/if}}
          {{#if status.isStarted}}
            <button type="button" class="btn btn-danger btn-sm mtr_stop">
              Stop
            </button>
            <button type="button" class="btn btn-primary btn-sm mtr_finish">
              Done
            </button>
          {{/if}}
          {{#if status.isStopped}}
            {{> restartButton}}
          {{/if}}
          {{#if status.isFinished}}
            {{> restartButton}}
          {{/if}}
        </div>
      </div>
    </li>
  {{/unless}}
</template>

<template name="restartButton">
  <button type="button" class="btn btn-primary btn-sm mtr_start">
    Restart
  </button>
</template>

<template name="taskLoe">
  <div class="task-loe dropdown pull-left">
    <button type="button" class="btn btn-default btn-xs" data-toggle="dropdown">
      {{averageLoe}} points
    </button>
    <ul class="dropdown-menu" role="menu">
      <li><a class="mtr_toggle-loe" data-loe="0">Unestimated</a></li>
      <li><a class="mtr_toggle-loe" data-loe="1">1 point</a></li>
      <li><a class="mtr_toggle-loe" data-loe="2">2 points</a></li>
      <li><a class="mtr_toggle-loe" data-loe="4">4 points</a></li>
      <li><a class="mtr_toggle-loe" data-loe="8">8 points</a></li>
    </ul>
  </div>
</template>

<template name="newTask">
  <div class="modal fade" id="newtask" tabindex="-1" role="dialog" aria-labelledby="newTaskLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="newTaskLabel">Add a new task</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="control-label">Task title</label>
            <input type="text" id="mtr_newTaskTitle" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" id="mtr_addTask" class="btn btn-primary">Add task</button>
        </div>
      </div>
    </div>
  </div>
</template>
